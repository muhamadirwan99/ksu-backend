// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  username   String    @id @db.VarChar(100)
  password   String    @db.VarChar(100)
  name       String    @db.VarChar(100)
  token      String?   @db.VarChar(255)
  created_at DateTime  @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  role       Role      @relation(fields: [role_id], references: [id])
  role_id    Int

  @@map("users")
}

model Role {
  id         Int       @id @default(autoincrement())
  role_name  String    @db.VarChar(100)
  created_at DateTime  @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  users      User[]

  @@map("roles")
}

model ResponseLog {
  id         Int      @id @default(autoincrement())
  success    Boolean
  message    String   @db.VarChar(255)
  data       Json
  created_at DateTime @db.Timestamp(6)

  @@map("response_logs")
}

model Divisi {
  kd_divisi  String     @id @db.VarChar(10)
  nm_divisi  String     @db.VarChar(100)
  created_at DateTime   @db.Timestamp(6)
  updated_at DateTime?  @db.Timestamp(6)
  Products   Products[]

  @@map("divisi")
}

model Supplier {
  kd_supplier   String     @id @db.VarChar(10)
  nm_supplier   String     @db.VarChar(100)
  nm_pemilik    String     @db.VarChar(100)
  nm_pic        String     @db.VarChar(100)
  no_wa         String     @db.VarChar(20)
  alamat        String     @db.VarChar(255)
  hutang_dagang Decimal?   @db.Decimal(10, 2)
  created_at    DateTime   @db.Timestamp(6)
  updated_at    DateTime?  @db.Timestamp(6)
  Products      Products[]

  @@map("suppliers")
}

model Products {
  kd_product     String    @id @db.VarChar(100)
  nm_product     String    @db.VarChar(100)
  kd_divisi      String    @db.VarChar(10)
  kd_supplier    String    @db.VarChar(10)
  harga_jual     Decimal   @db.Decimal(10, 2)
  harga_beli     Decimal   @db.Decimal(10, 2)
  status_product Boolean
  jumlah         Int       @db.Int
  keterangan     String?   @db.VarChar(255)
  created_at     DateTime  @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
  supplier       Supplier  @relation(fields: [kd_supplier], references: [kd_supplier])
  divisi         Divisi    @relation(fields: [kd_divisi], references: [kd_divisi])

  @@map("products")
}
