// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model ResponseLog {
  id_log     Int      @id @default(autoincrement())
  success    Boolean
  message    String   @db.Text
  data       Json
  created_at DateTime @db.Timestamp(6)

  @@map("response_logs")
}

model User {
  username   String    @id @db.VarChar(100)
  password   String    @db.VarChar(100)
  name       String    @db.VarChar(100)
  token      String?   @db.VarChar(255)
  id_role    String    @db.VarChar(10)
  created_at DateTime  @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  role       Role      @relation(fields: [id_role], references: [id_role])

  @@map("users")
}

model Role {
  id_role    String    @id @db.VarChar(10)
  role_name  String    @db.VarChar(100)
  created_at DateTime  @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
  users      User[]

  @@map("roles")
}

model Anggota {
  id_anggota     String    @id @db.VarChar(8)
  nm_anggota     String    @db.VarChar(100)
  alamat         String    @db.VarChar(255)
  no_wa          String    @db.VarChar(20)
  limit_pinjaman Decimal   @db.Decimal(10, 2)
  hutang         Decimal?  @db.Decimal(10, 2)
  created_at     DateTime  @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)

  @@map("anggota")
}

model Divisi {
  id_divisi  String     @id @db.VarChar(3)
  nm_divisi  String     @db.VarChar(100)
  created_at DateTime   @db.Timestamp(6)
  updated_at DateTime?  @db.Timestamp(6)
  products   Products[]

  @@map("divisi")
}

model Supplier {
  id_supplier   String     @id @db.VarChar(10)
  nm_supplier   String     @db.VarChar(100)
  nm_pemilik    String     @db.VarChar(100)
  nm_pic        String     @db.VarChar(100)
  no_wa         String     @db.VarChar(20)
  alamat        String     @db.VarChar(255)
  hutang_dagang Decimal?   @db.Decimal(10, 2)
  created_at    DateTime   @db.Timestamp(6)
  updated_at    DateTime?  @db.Timestamp(6)
  products      Products[]

  @@map("suppliers")
}

model Products {
  id_product     String    @id @db.VarChar(100)
  nm_product     String    @db.VarChar(100)
  id_divisi      String    @db.VarChar(3)
  id_supplier    String    @db.VarChar(10)
  harga_jual     Decimal   @db.Decimal(10, 2)
  harga_beli     Decimal   @db.Decimal(10, 2)
  status_product Boolean
  jumlah         Int       @db.Int
  keterangan     String?   @db.VarChar(255)
  created_at     DateTime  @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
  supplier       Supplier  @relation(fields: [id_supplier], references: [id_supplier])
  divisi         Divisi    @relation(fields: [id_divisi], references: [id_divisi])

  @@map("products")
}

model CashInOut {
  id_cash_in_out String                   @id @db.VarChar(3)
  tg_transaksi   DateTime
  id_cash        String                   @db.VarChar(10)
  id_jenis       Int
  id_detail      Int
  nominal        Decimal                  @db.Decimal(10, 2)
  keterangan     String?                  @db.VarChar(255)
  created_at     DateTime                 @db.Timestamp(6)
  updated_at     DateTime?                @db.Timestamp(6)
  reference_cash ReferenceCashInOut       @relation(fields: [id_cash], references: [id_cash])
  jenis_cash     ReferenceJenisCashInOut  @relation(fields: [id_jenis], references: [id_jenis])
  detail_cash    ReferenceDetailCashInOut @relation(fields: [id_detail], references: [id_detail])

  @@map("cash_in_out")
}

model ReferenceCashInOut {
  id_cash                      String                     @id @db.VarChar(10)
  nm_cash                      String                     @db.VarChar(100)
  created_at                   DateTime                   @db.Timestamp(6)
  updated_at                   DateTime?                  @db.Timestamp(6)
  reference_jenis_cash_in_out  ReferenceJenisCashInOut[]
  reference_detail_cash_in_out ReferenceDetailCashInOut[]
  cash_in_out                  CashInOut[]

  @@map("reference_cash_in_out")
}

model ReferenceJenisCashInOut {
  id_jenis                     Int                        @id @default(autoincrement())
  nm_jenis                     String                     @db.VarChar(100)
  id_cash                      String                     @db.VarChar(10)
  created_at                   DateTime                   @db.Timestamp(6)
  updated_at                   DateTime?                  @db.Timestamp(6)
  reference_cash_in_out        ReferenceCashInOut         @relation(fields: [id_cash], references: [id_cash])
  reference_detail_cash_in_out ReferenceDetailCashInOut[]
  CashInOut                    CashInOut[]

  @@map("reference_jenis_cash_in_out")
}

model ReferenceDetailCashInOut {
  id_detail                   Int                     @id @default(autoincrement())
  nm_detail                   String                  @db.VarChar(100)
  id_cash                     String                  @db.VarChar(10)
  id_jenis                    Int
  created_at                  DateTime                @db.Timestamp(6)
  updated_at                  DateTime?               @db.Timestamp(6)
  reference_cash_in_out       ReferenceCashInOut      @relation(fields: [id_cash], references: [id_cash])
  reference_jenis_cash_in_out ReferenceJenisCashInOut @relation(fields: [id_jenis], references: [id_jenis])
  CashInOut                   CashInOut[]

  @@map("reference_detail_cash_in_out")
}
